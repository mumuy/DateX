/*!
 * datex.js v1.0.14
 * a datetime format library
 * https://passer-by.com/datex/
 *
 * Copyright (c) 2022-present, HaoLe Zheng
 *
 * Released under the MIT License
 * https://github.com/mumuy/datex
 *
 * Created on: 2024-04-23
 */
function t(e,n){return t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},t(e,n)}function e(n,r,o){return e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct.bind():function(e,n,r){var o=[null];o.push.apply(o,n);var i=new(Function.bind.apply(e,o));return r&&t(i,r.prototype),i},e.apply(null,arguments)}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function r(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var o=["year","month","day","hour","minute","second","millsecond"],i=[1970,1,1,0,0,0,0],a={year:31536e6,month:2592e6,day:864e5,hour:36e5,minute:6e4,second:1e3,millsecond:1},u={Y:"year",M:"month",D:"day",H:"hour",m:"minute",s:"second",S:"millsecond",W:"week"};function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function c(t){return null!=t&&("object"==s(t)||"function"==typeof t)}function f(t){return!isNaN(t)}function h(t){return"string"==typeof t}function l(t){return"function"==typeof t}function m(t){return t instanceof Date}var d=[],g={_date:null,init:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var u,s=n.slice(0);if(s.length&&s[0]){if(Object.getPrototypeOf(s[0])==Object.getPrototypeOf(this))return s[0];if(m(s[0]))this._date=s[0];else{if(u=s[0],Array.isArray(u)?s=i.map((function(t,e){return s[0][e]||t})):c(s[0])&&(s=i.map((function(t,e){return s[0][o[e]]||t}))),1==s.length&&h(s[0])){var l=s[0].match(/(\d{1,4})[\-\/](\d{1,2})[\-\/](\d{1,2})([\sT](\d{1,2})?:(\d{1,2})?(:(\d{1,2}))?(\.(\d{1,3}))?)?/),g=s[0].match(/(\d{1,2})[\-\/](\d{1,2})[\-\/](\d{3,4})([\sT](\d{1,2})?:(\d{1,2})?(:(\d{1,2}))?(\.(\d{1,3}))?)?/),p=s[0].match(/^([12]\d{3})(\d{2})(\d{2})(\d{2})?(\d{2})?(\d{2})?(\d{1,3})?/);l&&!g?s=[1,2,3,5,6,8,10].map((function(t,e){return+(l[t]||i[e])})):g?s=[3,1,2,5,6,8,10].map((function(t,e){return+(g[t]||i[e])})):p&&(s=[1,2,3,4,5,6,7].map((function(t,e){return+(p[t]||i[e])})))}s.length>=3&&s[1]--,this._date=e(Date,r(s)),s.length>=2&&f(s[0])&&s[0]<100&&this._date.setFullYear(s[0])}}else this._date=new Date;var y=this;return d.forEach((function(t){t.bind(y).apply(void 0,n)})),this},onInit:function(t){d.push(t)}};function p(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e(p.prototype.init,n)}function y(t){var e=function(t,e){if("object"!==s(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===s(e)?e:String(e)}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,y(r.key),r)}}function b(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function M(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,b(t,e,"get"))}function w(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,b(t,e,"set"),n),n}function O(t,e,n){S(t,e),e.set(t,n)}function S(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}p.now=Date.now,p.extend=function(t){t(p,g)},p.prototype=g,g.init.prototype=g;var j=new WeakMap,D=new WeakMap,T=new WeakMap,W=new WeakSet,Y=function(){function t(){var e,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),S(e=this,n=W),n.add(e),O(this,j,{writable:!0,value:null}),O(this,D,{writable:!0,value:null}),O(this,T,{writable:!0,value:0});for(var r=this,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];if(2==i.length)c(i[0])&&c(i[1])?(w(r,j,i[0]),w(r,D,i[1]),w(r,T,M(r,j).getTime()-M(r,D).getTime())):f(i[0])&&h(i[1])&&r.change(i[1],i[0]);else if(1==i.length)if(c(i[0]))for(var u in i[0])r.change(u,i[0][u]);else f(i[0])&&w(r,T,M(r,T)+i[0])}var e,n,r;return e=t,n=[{key:"change",value:function(t,e){var n=this;return M(n,j)&&M(n,D)?(M(n,j).change(t,e),w(n,T,M(n,j).getTime()-M(n,D).getTime())):a[t]&&w(n,T,M(n,T)+a[t]*e),n}},{key:"get",value:function(t){var e=this;if(t){if(M(e,j)&&M(e,D)){var n=M(e,j),r=M(e,D),o=M(e,T),i=0;return"month"==t?(i=12*(n.get("year")-1)+n.get("month")-(12*(r.get("year")-1)+r.get("month")))<0&&n.get("day")>r.get("day")?i+=1:i>0&&n.get("day")<r.get("day")&&(i-=1):"year"==t?(i=n.get("year")-r.get("year"))<0&&(n.get("month")>r.get("month")||n.get("month")==r.get("month")&&n.get("day")>r.get("day"))?i+=1:i>0&&(n.get("month")<r.get("month")||n.get("month")==r.get("month")&&n.get("day")<r.get("day"))&&(i-=1):a[t]&&(i=~~(o/a[t])),i}return a[t]&&Math.floor(M(e,T)/a[t])||0}return M(e,T)}},{key:"toObject",value:function(){var t=this;return Object.assign({value:M(t,T)},_(t,W,k).call(t,o))}},{key:"format",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"YYYY-MM-DD HH:mm:ss";if(h(t)){var e=[];t.match(/Y+|M+|D+|H+|m+|s+|S+/g).forEach((function(t){var n=u[t[0]];e.includes(n)||e.push(n)}));var n=_(this,W,k).call(this,e),r={Y:""+n.year,M:""+n.month,D:""+n.day,H:""+n.hour,m:""+n.minute,s:""+n.second,S:""+n.millsecond};return t.replace(/Y+|M+|D+|H+|m+|s+|S+/g,(function(t){if(r[t])return r[t];if(r[t[0]]){var e=r[t[0]]<0,n=Math.abs(r[t[0]]).toString().padStart(t.length,"0");return e?"-"+n:n}return""}))}if(l(t))return t(this.toObject()).toString()||""}}],n&&v(e.prototype,n),r&&v(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function k(t){var e=this,n={};if(M(e,j)&&M(e,D)){var r=M(e,T),o=M(e,j).clone(),i=M(e,D).clone();t.forEach((function(t){n[t]=e.get(t),e.change(t,-n[t])})),w(e,T,r),w(e,j,o),w(e,D,i)}else{var u=M(e,T);t.forEach((function(t){a[t]&&(n[t]=Math.floor(u/a[t])||0,u%=a[t])}))}return n}var A={name:"en-us",format:{MMM:["Jan.","Feb.","Mar.","Apr.","May.","Jun.","Jul.","Aug.","Sept.","Oct.","Nov.","Dec."],MMMM:["January","February","March","April","May","June","July","August","September","October","November","December"],Do:["1st","2nd","3rd","4th","5th","6th","7th","8th","9th","10th","11th","12th","13th","14th","15th","16th","17th","18th","19th","20th","21st","22nd","23rd","24th","25th","26th","27th","28th","29th","30th","31st"],WW:["Sun.","Mon.","Tues.","Wed.","Thur.","Fri.","Sat."],WWW:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},duration:{past:"%s ago",future:"in %s","past moments":"just now","future moments":"moments later",now:"now",year:"%d year",month:"%d month",day:"%d day",hour:"%d hour",minute:"%d minute",second:"%d second",millsecond:"just now",years:"%d years",months:"%d months",days:"%d days",hours:"%d hours",minutes:"%d minutes",seconds:"%d seconds",millseconds:"just now"}},z={name:"zh-cn",format:{MMM:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],MMMM:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],Do:["1日","2日","3日","4日","5日","6日","7日","8日","9日","10日","11日","12日","13日","14日","15日","16日","17日","18日","19日","20日","21日","22日","23日","24日","25日","26日","27日","28日","29日","30日","31日"],WW:["周日","周一","周二","周三","周四","周五","周六"],WWW:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},duration:{past:"%s前",future:"%s后","past moments":"刚刚","future moments":"片刻后",now:"现在",year:"%d年",month:"%d月",day:"%d天",hour:"%d小时",minute:"%d分钟",second:"%d秒",years:"%d年",months:"%d月",days:"%d天",hours:"%d小时",minutes:"%d分钟",seconds:"%d秒"}};[function(t,e){Object.assign(e,{toDate:function(){return this._date},toObject:function(){var t=this._date;return{year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),millsecond:t.getMilliseconds(),timestamp:t.getTime(),week:t.getDay()}},toArray:function(){var t=this.toObject();return o.map((function(e){return t[e]}))},toString:function(){return this._date.toString()},toISOString:function(){return this._date.toISOString()},getTime:function(){return this._date.getTime()},getUnix:function(){return~~(this._date.getTime()/1e3)},clone:function(){var e=t(this.getTime());return Object.assign(e,structuredClone(this))},isValid:function(){return!isNaN(this.getTime())},set:function(t,e){var n=this._date,r=this.toObject();switch(t){case"year":n.setFullYear(e);break;case"month":n.setMonth(e-1);break;case"day":n.setDate(e);break;case"hour":n.setHours(e);break;case"minute":n.setMinutes(e);break;case"second":n.setSeconds(e);break;case"millsecond":n.setMilliseconds(e);break;case"timestamp":n.setTime(e);break;case"week":n.setDate(r.day-r.week+e)}return this},change:function(t,e){var n=this.toObject();return["day","hour","minute","second","millsecond"].includes(t)?this.set("timestamp",n.timestamp+e*a[t]):this.set(t,n[t]+e)},get:function(t){return this.toObject()[t]},format:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"YYYY-MM-DD HH:mm:ss";if(h(t)){var e=this.clone(),n=e._date,r=e.toObject(),o=n.toTimeString().match(/GMT([\+\-])(\d{2})(\d{2})/),i={YYYY:(""+r.year).padStart(4,"0"),YY:(""+r.year%100).padStart(2,"0"),M:""+r.month,D:""+r.day,H:""+r.hour,h:""+r.hour%12,m:""+r.minute,s:""+r.second,S:""+~~(r.millsecond/100),SS:""+~~(r.millsecond/10),SSS:""+r.millsecond,Z:o[1]+o[2]+":"+o[3],ZZ:o[1]+o[2]+o[3],A:["AM","PM"][~~(r.hour/12)],a:["am","pm"][~~(r.hour/12)],X:r.timestamp,x:~~(r.timestamp/1e3),Q:""+~~(r.month/3),W:r.week};return t.replace(/Y+|M+|Do|D+|H+|h+|m+|s+|S+|Z+|A|a|X|x|Q|W+/g,(function(t){return i[t]||i[t[0]].padStart(t.length,"0")||""}))}if(l(t))return t(this.toObject()).toString()||""}})},function(t,e){Object.assign(e,{endOf:function(t){return this.startOf(t).change(t,"week"==t?7:1).change("millsecond",-1)},startOf:function(e){var n=this.toObject(),a=o.indexOf(e)+1,u=this.toArray(),s=i.slice(a);return u.splice.apply(u,[a,s.length].concat(r(s))),"timestamp"==e?this.clone():"week"==e?t(n.year,n.month,n.day-n.week,0,0,0,0):t.apply(void 0,r(u))}})},function(t,e){Object.assign(e,{isAfter:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"timestamp";return e=t(e),this.get(n)>e.get(n)},isBefore:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"timestamp";return e=t(e),this.get(n)<e.get(n)},isBetween:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"timestamp";return e=t(e),n=t(n),this.get(r)>e.get(r)&&this.get(r)<n.get(r)},isSame:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"timestamp";return e=t(e),this.get(n)==e.get(n)}})},function(t,n){Object.assign(t,{duration:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e(Y,n)}}),Object.assign(n,{diffWith:function(e,n){if(!(e=t(e)).isValid())return 0;var r=t.duration(this,e);return n?r.get(n):r},fromNow:function(){var e=t(),n=t.duration(this,e).toObject(),r=n.value<0,o="",i=t.getLanguage();return["year","month","day","hour","minute","second"].forEach((function(t){var e=Math.abs(n[t]);if(!o&&e){var a=(e>1?i.duration[t+"s"]:i.duration[t]).replace("%d",e);o=(r?i.duration.past:i.duration.future).replace("%s",a)}})),o||(o=n.value?r?i.duration["past moments"]:i.duration["future moments"]:i.duration.now),o}})},function(t,e){var n={};n["en-us"]=A,n["zh-cn"]=z,[A,z].forEach((function(t){n[t.name]=t}));var r="en-us";"undefined"!=typeof self&&self.navigator&&(r=self.navigator.language.toLowerCase(),n[r]||(r="en-us")),Object.assign(t,{setLanguage:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=t.toLowerCase(),n[t]=Object.assign(n[t]||{},e),this},switchLanguage:function(t){return r=t.toLowerCase(),this},getLanguage:function(){return n[r]}}),Object.assign(e,{_langMap:{},_lang:null,setLanguage:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=t.toLowerCase(),this._langMap[t]=Object.assign(this._langMap[t]||{},e),this},switchLanguage:function(t){return this._lang=t.toLowerCase(),this},getLanguage:function(){return this._langMap[this._lang]}}),e.onInit((function(){this._langMap=Object.assign(this._langMap,n),this._lang=r}));var o=e.format;Object.assign(e,{format:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"YYYY-MM-DD HH:mm:ss",n=this.clone().toObject(),r=t.getLanguage()||this.getLanguage(),i={};for(var a in i.MMM=r.format.MMM[n.month-1],i.MMMM=r.format.MMMM[n.month-1],i.Do=r.format.Do[n.day-1],i.WW=r.format.WW[n.week],i.WWW=r.format.WWW[n.week],i)e=e.replace(a,i[a]||"");return o.bind(this)(e)}})},function(t,e){var n=Intl.DateTimeFormat().resolvedOptions().timeZone,r=0,o=function(t,e){return new Date(t.toLocaleString("en-US",{timeZone:e}))},i="1970/1/1";Object.assign(t,{supportedTimezones:"undefined"!=typeof Intl&&Intl.supportedValuesOf?Intl.supportedValuesOf("timeZone"):[],switchTimezone:function(t){return n=t,r=o(new Date(i),n).getTime()-Date.parse(i),this},getTimezoneOffset:function(){return(new Date).getTimezoneOffset()-r/6e4},getTimezone:function(){return n}}),Object.assign(e,{_timezone:null,_offset:0,switchTimezone:function(t){return this._timezone=t,this._offset=o(new Date(i),this._timezone).getTime()-Date.parse(i),this},getTimezoneOffset:function(){return this._date.getTimezoneOffset()-this._offset/6e4},getTimezone:function(){return this._timezone}}),e.onInit((function(){this._timezone=n,this._offset=r,arguments.length&&(arguments.length<=0?void 0:arguments[0])&&(m(arguments.length<=0?void 0:arguments[0])||(arguments.length<=0?void 0:arguments[0])instanceof t||1==arguments.length&&f(arguments.length<=0?void 0:arguments[0])||r&&this._date.setTime(this._date.getTime()-r))}));var a=e.format;Object.assign(e,{format:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"YYYY-MM-DD HH:mm:ss",e=this.clone();return e._date.setTime(e._date.getTime()+e._offset),a.bind(e)(t)}})},function(t,e){var n=t.getLanguage();e.onInit((function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];var a=r.slice(0);if(a.length&&a[0]&&2==a.length&&h(a[0])&&h(a[1])){var s=function(e,r){var i=[],a=r.replace(/Y+|M+|Do|D+|H+|h+|m+|s+|S+|Z+|A|a|X|x|Q|W+/g,(function(t,e){if(n.format[t]){if(["MMM","MMMM"].includes(t))return i.push("month"),"("+n.format[t].join("|")+")";if(["Do"].includes(t))return i.push("day"),"("+n.format[t].join("|")+")";if(["WW","WWW"].includes(t))return i.push("week"),"("+n.format[t].join("|")+")"}else{if(u[t[0]])return i.push(u[t[0]]),"(\\d{1,"+t.length+"})";if(["h","hh"].includes(t))return i.push("hour_12"),"(\\d{1,2})";if("ZZ"==t)return i.push("timezone"),"(-?\\d{2}\\d{2})";if("Z"==t)return i.push("timezone"),"(-?\\d{2}:\\d{2})";if("A"==t)return i.push("am_pm"),"(AM|PM)";if("a"==t)return i.push("am_pm"),"(am|pm)";if("X"==t)return i.push("timestamp"),"(d+)";if("x"==t)return i.push("unix"),"(d+)"}return t})),s={},c=e.match(new RegExp(a));c&&c.slice(1).forEach((function(t,e){var n=i[e];s[n]=t}));var f={};return o.forEach((function(t){+s[t]&&(f[t]=+s[t])})),s.hour_12?(f.hour=+s.hour_12,s.am_pm&&["PM","pm"].includes(s.am_pm)&&(f.hour+=12)):s.timestamp?f=t(s.timestamp):s.unix&&(f=t(1e3*s.unix)),f}(a[0],a[1]);Object.keys(s).length?this._date=t(s).toDate():this._date=new Date("")}}))}].forEach(p.extend);export{p as default};
