/*!
 * datex.js v1.0.11
 * a datetime format library
 * https://passer-by.com/datex/
 *
 * Copyright (c) 2022-present, HaoLe Zheng
 *
 * Released under the MIT License
 * https://github.com/mumuy/datex
 *
 * Created on: 2023-08-29
 */
const t=["year","month","day","hour","minute","second","millsecond"],e=[1970,1,1,0,0,0,0],n={day:864e5,hour:36e5,minute:6e4,second:1e3,millsecond:1};let s=[];var i={_date:null,init:function(...n){if(n.length){if(Object.getPrototypeOf(n[0])==Object.getPrototypeOf(this))return n[0];if(n[0]instanceof Date)this._date=n[0];else{if(Array.isArray(n[0])?n=e.map(((t,e)=>n[0][e]||t)):null==(i=n[0])||"object"!=typeof i&&"function"!=typeof i||(n=e.map(((e,s)=>n[0][t[s]]||e))),1==n.length&&"string"==typeof n[0]){let t=n[0].match(/(\d{1,4})[\-\/](\d{1,2})[\-\/](\d{1,2})([\sT](\d{1,2})?:(\d{1,2})?(:(\d{1,2}))?(\.(\d{1,3}))?)?/),s=n[0].match(/(\d{1,2})[\-\/](\d{1,2})[\-\/](\d{3,4})([\sT](\d{1,2})?:(\d{1,2})?(:(\d{1,2}))?(\.(\d{1,3}))?)?/),i=n[0].match(/^([12]\d{3})(\d{2})(\d{2})(\d{2})?(\d{2})?(\d{2})?(\d{1,3})?/);t&&!s?n=[1,2,3,5,6,8,10].map((function(n,s){return+(t[n]||e[s])})):s?n=[3,1,2,5,6,8,10].map((function(t,n){return+(s[t]||e[n])})):i&&(n=[1,2,3,4,5,6,7].map((function(t,n){return+(i[t]||e[n])})))}n.length>=3&&n[1]--,this._date=new Date(...n),n.length>=2&&!isNaN(n[0])&&n[0]<100&&this._date.setFullYear(n[0])}}else this._date=new Date;var i;let a=this;return s.forEach((function(t){t.bind(a)(...n)})),this},onInit:function(t){s.push(t)}};function a(...t){return new a.prototype.init(...t)}a.now=Date.now,a.extend=function(t){t(a,i)},a.prototype=i,i.init.prototype=i;var r={MMM:["Jan.","Feb.","Mar.","Apr.","May.","Jun.","Jul.","Aug.","Sept.","Oct.","Nov.","Dec."],MMMM:["January","February","March","April","May","June","July","August","September","October","November","December"],Do:["1st","2nd","3rd","4th","5th","6th","7th","8th","9th","10th","11th","12th","13th","14th","15th","16th","17th","18th","19th","20th","21st","22nd","23rd","24th","25th","26th","27th","28th","29th","30th","31st"],WW:["Sun.","Mon.","Tues.","Wed.","Thur.","Fri.","Sat."],WWW:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},o={MMM:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],MMMM:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],Do:["1日","2日","3日","4日","5日","6日","7日","8日","9日","10日","11日","12日","13日","14日","15日","16日","17日","18日","19日","20日","21日","22日","23日","24日","25日","26日","27日","28日","29日","30日","31日"],WW:["周日","周一","周二","周三","周四","周五","周六"],WWW:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]};[function(e,s){Object.assign(s,{toDate(){return this._date},toObject(){let t=this._date;return{year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),millsecond:t.getMilliseconds(),timestamp:t.getTime(),week:t.getDay()}},toArray(){let e=this.toObject();return t.map((t=>e[t]))},toString(){return this._date.toString()},toISOString(){return this._date.toISOString()},getTime(){return this._date.getTime()},getUnix(){return~~(this._date.getTime()/1e3)},clone(){let t=this,n=e(this.getTime());return Object.getOwnPropertyNames(t).forEach((function(e){"_date"!=e&&(n[e]=t[e])})),n},isValid(){return!isNaN(this.getTime())},set(t,e){let n=this._date,s=this.toObject();switch(t){case"year":n.setFullYear(e);break;case"month":n.setMonth(e-1);break;case"day":n.setDate(e);break;case"hour":n.setHours(e);break;case"minute":n.setMinutes(e);break;case"second":n.setSeconds(e);break;case"millsecond":n.setMilliseconds(e);break;case"timestamp":n.setTime(e);break;case"week":n.setDate(s.day-s.week+e)}return this},change(t,e){let s=this.toObject();return void 0!==n[t]?this.set("timestamp",s.timestamp+e*n[t]):this.set(t,s[t]+e)},get(t){return this.toObject()[t]},format(t="YYYY-MM-DD HH:mm:ss"){let e=this.clone(),n=e._date,s=e.toObject(),i=n.toTimeString().match(/GMT([\+\-])(\d{2})(\d{2})/),a={YYYY:""+s.year,YY:(""+s.year).padStart(2,"0"),MM:(""+s.month).padStart(2,"0"),M:""+s.month,DD:(""+s.day).padStart(2,"0"),D:""+s.day,HH:(""+s.hour).padStart(2,"0"),H:""+s.hour,hh:(""+s.hour%12).padStart(2,"0"),h:""+s.hour%12,mm:(""+s.minute).padStart(2,"0"),m:""+s.minute,ss:(""+s.second).padStart(2,"0"),s:""+s.second,S:""+~~(s.millsecond%1e3/100),SS:""+~~(s.millsecond%1e3/10),SSS:""+s.millsecond%1e3,Z:i[1]+i[2]+":"+i[3],ZZ:i[1]+i[2]+i[3],A:["AM","PM"][~~(s.hour/12)],a:["am","pm"][~~(s.hour/12)],X:s.timestamp,x:~~(s.timestamp/1e3),Q:""+~~(s.month/3),W:s.week};return t.replace(/Y+|M+|D+|H+|h+|m+|s+|S+|Z+|A|a|X|x|Q|W+/g,(function(t){return a[t]||""}))}})},function(s,i){Object.assign(i,{diffWith(e,i){if(!(e=s(e)).isValid())return!1;let a=this.getTime()-e.getTime(),r=0;if(i){if(n[i])r=~~(a/n[i]);else if("month"==i){r=12*(this.get("year")-1)+this.get("month")-(12*(e.get("year")-1)+e.get("month")),r<0&&this.get("day")>e.get("day")?r+=1:r>0&&this.get("day")<e.get("day")&&(r-=1)}else"year"==i&&(r=this.get("year")-e.get("year"),r<0&&(this.get("month")>e.get("month")||this.get("month")==e.get("month")&&this.get("day")>e.get("day"))?r+=1:r>0&&(this.get("month")<e.get("month")||this.get("month")==e.get("month")&&this.get("day")<e.get("day"))&&(r-=1));return r}{let n=this.clone(),s={};return t.forEach((function(t){s[t]=n.diffWith(e,t),n.set(t,e.get(t))})),s}},endOf(t){return this.startOf(t).change(t,"week"==t?7:1).change("millsecond",-1)},startOf(n){let i=this.toObject(),a=null,r=t.indexOf(n)+1,o=this.toArray(),h=e.slice(r);return o.splice(r,h.length,...h),a="timestamp"==n?this.clone():"week"==n?s(i.year,i.month,i.day-i.week,0,0,0,0):s(...o),a}})},function(t,e){Object.assign(e,{isAfter(e,n="timestamp"){return e=t(e),this.get(n)>e.get(n)},isBefore(e,n="timestamp"){return e=t(e),this.get(n)<e.get(n)},isBetween(e,n,s="timestamp"){return e=t(e),n=t(n),this.get(s)>e.get(s)&&this.get(s)<n.get(s)},isSame(e,n="timestamp"){return e=t(e),this.get(n)==e.get(n)}})},function(t,e){let n={};n["en-us"]=r,n["zh-cn"]=o;let s="en-us";"undefined"!=typeof self&&self.navigator&&(s=self.navigator.language.toLowerCase(),n[s]||(s="en-us")),Object.assign(t,{setLanguage(t,e={}){return t=t.toLowerCase(),n[t]=Object.assign(n[t]||{},e),this},switchLanguage(t){return s=t.toLowerCase(),this},getLanguage:()=>n[s]}),Object.assign(e,{_langMap:{},_lang:null,setLanguage(t,e={}){return t=t.toLowerCase(),this._langMap[t]=Object.assign(this._langMap[t]||{},e),this},switchLanguage(t){return this._lang=t.toLowerCase(),this},getLanguage(){return this._langMap[this._lang]}}),e.onInit((function(){this._langMap=Object.assign(this._langMap,n),this._lang=s}));let i=e.format;Object.assign(e,{format(e="YYYY-MM-DD HH:mm:ss"){let n=this.clone().toObject(),s=t.getLanguage()||this.getLanguage(),a={};a.MMM=s.MMM[n.month-1],a.MMMM=s.MMMM[n.month-1],a.Do=s.Do[n.day-1],a.WW=s.WW[n.week],a.WWW=s.WWW[n.week];for(let t in a)e=e.replace(t,a[t]||"");return i.bind(this)(e)}})},function(t,e){let n=Intl.DateTimeFormat().resolvedOptions().timeZone,s=0;const i=(t,e)=>new Date(t.toLocaleString("en-US",{timeZone:e}));Object.assign(t,{supportedTimezones:"undefined"!=typeof Intl&&Intl.supportedValuesOf?Intl.supportedValuesOf("timeZone"):[],switchTimezone(t){return n=t,s=i(new Date("1970/1/1"),n).getTime()-new Date("1970/1/1").getTime(),this},getTimezoneOffset:()=>(new Date).getTimezoneOffset()-s/6e4,getTimezone:()=>n}),Object.assign(e,{_timezone:null,_offset:0,switchTimezone(t){return this._timezone=t,this._offset=i(new Date("1970/1/1"),this._timezone).getTime()-new Date("1970/1/1").getTime(),this},getTimezoneOffset(){return this._date.getTimezoneOffset()-this._offset/6e4},getTimezone(){return this._timezone}}),e.onInit((function(...e){this._timezone=n,this._offset=s,e.length&&(e[0]instanceof Date||e[0]instanceof t||1==e.length&&"number"==typeof e[0]||s&&this._date.setTime(this._date.getTime()-s))}));let a=e.format;Object.assign(e,{format(t="YYYY-MM-DD HH:mm:ss"){let e=this.clone();return e._date.setTime(e._date.getTime()+e._offset),a.bind(e)(t)}})}].forEach(a.extend);export{a as default};
